import{R as e,r as s}from"./app.7179bf09.js";import v from"./header.0044806a.js";import{y as k,z as b}from"./icons.63ea3f8d.js";import{B as N}from"./Button.70ac681d.js";import{c as P}from"./inline.c6606910.js";import{g as S}from"./api.3a01e3bc.js";import{t as r}from"./Toast.b8ef6e60.js";import"./Logo.466f055b.js";import"./helpers.0557fa85.js";import"./moment.9709ab41.js";import"./DropdownMenu.02b2b6f4.js";import"./Avatar.ed1856cd.js";import"./Button.e49676a1.js";import"./transition.c8990606.js";import"./keyboard.6d843577.js";import"./ChevronDownIcon.e12a2f77.js";const C="https://viralget.io/build/assets/paystack_logo.71b2c6a2.png",T=()=>e.createElement("div",{className:"p-space-16 w-full  bg-viralget-red-100 space-x-2 rounded-md flex items-center justify-center"},e.createElement(k,null),e.createElement("span",{className:"text-t-normal  font-normal"},"Your card won't be charged until the end of the free trial period. ")),_=n=>{const{auth:{user:m},plan_id:i,plan:p,public_key:d}=n,[c,f]=s.exports.useState(""),[u,o]=s.exports.useState("Continue"),[g,l]=s.exports.useState(!1);function y(){l(!0),o("Initiating payment..."),new P().newTransaction({key:d,email:m.email,amount:1,reference:new Date().getTime().toString(),plan:p.plan_code,onSuccess:a=>{x(a.reference)},onCancel:()=>{console.log("You need this, stay back!")}})}function x(t){o("Verifying payment.."),S(route("user.verify.payment",{reference:t,plan_id:i})).then(a=>{a.data.status?(r.success("Payment verification successful"),setTimeout(function(){window.location.href="/select-social"},2e3)):r.error("Something went wrong")}).catch(a=>{console.log("error:",a),r.error("Something went wrong")}).finally(()=>l(!1))}function h(t){const a=t.target.name;f(a)}function E(){c==="paystack"&&y()}const w=({value:t})=>e.createElement("div",{className:"flex justify-between  items-center rounded-[8px] border border-viraget-gray-300 p-space-20"},e.createElement("div",{className:"flex space-x-3 items-center"},e.createElement("input",{id:t,name:t,value:t,checked:c=="paystack",onChange:h,type:"checkbox",className:"h-4 w-4 rounded  accent-viralget-red  text-white bg-white"}),e.createElement("span",{className:"text-t-xsx capitalize font-medium font-lexend"},t)),t==="card"?e.createElement(b,{className:"w-space-68 h-space-12"}):t==="paystack"?e.createElement("img",{src:C,className:"w-space-68 h-space-12"}):null);return e.createElement("div",null,e.createElement("div",{className:"w-full flex items-center mt-space-80 px-space-10  justify-center"},e.createElement("div",{className:"flex flex-col "},e.createElement("span",{className:"font-bold font-lexend lg:text-t-xlg  text-t-lg text-center "},"Payment method"),e.createElement("div",{className:"mt-space-20"},e.createElement(T,null)),e.createElement("div",{className:"mt-space-20 flex flex-col space-y-4"},e.createElement(w,{value:"paystack"})),e.createElement("div",{className:"text-left mt-space-20"},e.createElement(N,{className:"block w-auto bg-viralget-red rounded-[8px]  px-space-40",processing:g,onClick:E},u)))))},G=n=>e.createElement(e.Fragment,null,e.createElement(v,{user,levels:Levels}),e.createElement(_,{...n}));export{_ as PaymentProccess,G as default};
