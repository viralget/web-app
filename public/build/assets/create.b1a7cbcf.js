import{r as s,u as T,R as e,G as z}from"./app.4d6c910b.js";import{A as G}from"./AuthenticatedLayout.dfa848eb.js";import{B as A}from"./ButtonBack.67a6620d.js";import{B as g}from"./Button.f177491c.js";import{c as d,g as y}from"./helpers.2cdb54e0.js";import"./UploadImage.ee3cacb7.js";import{c as M}from"./inline.c6606910.js";import{S as V}from"./StripePaymentButton.55b4bf2e.js";import{t as j}from"./Toast.338498ac.js";import"./steps.b21ecc9a.js";import H from"./Details.56541102.js";import I from"./Influencers.dc4da997.js";import L from"./Contents.6af02331.js";import"./Logo.d688e7ec.js";import"./DropdownMenu.b8609d0c.js";import"./Avatar.7c75e232.js";import"./ChevronDownIcon.6603c104.js";import"./transition.01f4598c.js";import"./keyboard.4b1bfd97.js";import"./icons.c84f5881.js";import"./XMarkIcon.07f13224.js";import"./Bars3CenterLeftIcon.ca2eec95.js";import"./dialog.427c9b22.js";import"./description.776b4451.js";import"./moment.9709ab41.js";import"./index.e8fcc329.js";import"./api.96b63d79.js";import"./Input.9dc48388.js";import"./Label.883d450b.js";import"./MultiSelect.40e38529.js";import"./select.383127ec.js";import"./Combination.7ac36429.js";import"./Select.cece4778.js";import"./TextArea.51030a8e.js";function Se({user:c}){const[a,m]=s.exports.useState("details"),[b,x]=s.exports.useState(null),[U,E]=s.exports.useState(0),[l,_]=s.exports.useState(0),[N,w]=s.exports.useState({});s.exports.useState(!1);const[k,p]=s.exports.useState("Pay & Create Campaign"),{data:n,setData:i,post:h,processing:S,errors:W,reset:v}=T({title:"",social_network:"",campaign_type:"",budget:"",keywords:"",start_date:"",end_date:"",description:"",brand_name:"",location:"",gender:"",age:"",interest:"",reach:"",impression:"",engagement:"",conversion:"",logo:"",about_us:"",campaign_goal:"",campaign_message:"",key_objectives:"",channels:"",timeline:"",mood_board:"",target_audience:"",currency:"NGN",influencer_niche:"",influencer_size:"",influencer_number:"",influencer_gender:"",influencer_location:"",influencer_category:""});s.exports.useEffect(()=>{w({email:c.email,amount_usd:l,metadata:{...n,email:c.email},paymentDataExtras:{},type:"paid-listing",paymentVerificationRoute:route("general.payments.verify"),successRedirectsTo:route("preorder.success")})},[n]);const u=t=>{i(t.target.name,y(t))},C=t=>{if(t.target.files&&t.target.files[0]){i("logo",t.target.files[0]);let r=new FileReader;r.onload=o=>{x(o.target.result)},r.readAsDataURL(t.target.files[0])}};function B(t){if(t.preventDefault(),a==="details"){m("contents");return}if(a==="contents"){m("influencer");return}n.currency==="NGN"&&F()}function F(){p("initiating payment..."),new M().newTransaction({key:"pk_live_3c0c5c796849b1f432db34306cd8a23478cd0d7a",email:c.email,amount:l*100,reference:new Date().getTime().toString(),metadata:{...n,platform:n.social_network,email:c.email},onSuccess:r=>{const o={reference:r.reference,payment_gateway:"paystack"};P(o)},onCancel:()=>{console.log("You need this, stay back!")}})}async function P(t){p("Verifying payment..");const r=await z.post(route("general.payments.verify"),t);r!=null&&r.data.status?D():j.error("Something went wrong")}const D=async()=>{p("Creating campaign.."),h(route("brief.store")),v(),window.location.href=route("brief.success")};function f(t){i(t.target.name,y(t));const r=t.target.value,o=.15*Number(r),R=Number(r)+o;_(R),E(o)}return e.createElement(G,{title:"My Campaigns",smallHeader:!0},e.createElement("div",{className:"bg-white h-screen  mt-3 px-5 mb-10"},e.createElement(A,null),e.createElement("div",{className:"flex  justify-center mx-auto p-5 text-sm bg-gray-50 my-5"},e.createElement("div",{className:"flex space-x-5"},e.createElement("span",{className:"font-bold  text-viralget-red  capitalize"},"campaign  details"),e.createElement("span",{className:"text-gray-300"},"|"),e.createElement("span",{className:d("font-bold  capitalize",a=="contents"||a=="influencer"?"text-viralget-red":"text-gray-300")},"content"),e.createElement("span",{className:"text-gray-300"},"|"),e.createElement("span",{className:d("font-bold  capitalize",a=="influencer"?"text-viralget-red":"text-gray-300")},"influencers  detail"))),e.createElement("form",{onSubmit:B,className:"mt-10  bg-white shadow-sm md:p-5 p-3 w-full"},a=="details"?e.createElement(e.Fragment,null,e.createElement(H,{data:n,onHandleChange:u,setData:i})):a=="influencer"?e.createElement(I,{data:n,onHandleChange:u,setData:i,handleBudget:f}):e.createElement(e.Fragment,null,e.createElement(L,{data:n,onHandleChange:u,setData:i,handleBudget:f,displayFile:C,image:b})),e.createElement("div",{className:"text-center flex space-x-3 mt-4 md:max-w-md"},a=="details"?null:e.createElement(g,{type:"buton",className:"block w-full bg-white text-viralget-red",onClick:()=>m(a=="influencer"?"contents":"details")},"Back"),n.currency=="NGN"?e.createElement(g,{type:"submit",usePrimary:!0,block:!0,processing:S},a=="details"||a=="contents"?"Next":k):e.createElement(V,{...N,amount:l},"Pay & Create Campaign")))))}export{Se as default};
